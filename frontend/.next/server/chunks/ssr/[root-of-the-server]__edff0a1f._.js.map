{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/ha%20manh%20cuong/work/ctm/frontend/src/lib/constants/constants.ts"],"sourcesContent":["export const priceRanges = [\r\n    { label: \"Dưới 100.000đ\", value: \"-100000\" },\r\n    {\r\n        label: '100.000đ <i class=\"fa fa-long-arrow-right mx-1\" style=\"font-size: 13px;\"></i> 200.000đ',\r\n        value: \"100000-200000\",\r\n    },\r\n    {\r\n        label: '200.000đ <i class=\"fa fa-long-arrow-right mx-1\" style=\"font-size: 13px;\"></i> 300.000đ',\r\n        value: \"200000-300000\",\r\n    },\r\n    {\r\n        label: '300.000đ <i class=\"fa fa-long-arrow-right mx-1\" style=\"font-size: 13px;\"></i> 500.000đ',\r\n        value: \"300000-500000\",\r\n    },\r\n    {\r\n        label: '500.000đ <i class=\"fa fa-long-arrow-right mx-1\" style=\"font-size: 13px;\"></i> 1.000.000đ',\r\n        value: \"500000-1000000\",\r\n    },\r\n    {\r\n        label: '1.000.000đ <i class=\"fa fa-long-arrow-right mx-1\" style=\"font-size: 13px;\"></i> 2.000.000đ',\r\n        value: \"1000000-2000000\",\r\n    },\r\n    { label: \"Trên 2.000.000đ\", value: \"2000000-\" },\r\n];\r\n\r\nexport const ratings = [\r\n    {\r\n        label: 'Đánh giá trên 5 <i class=\"fa-solid fa-star text-warning\"></i>',\r\n        value: 5,\r\n    },\r\n    {\r\n        label: 'Đánh giá trên 4 <i class=\"fa-solid fa-star text-warning\"></i>',\r\n        value: 4,\r\n    },\r\n    {\r\n        label: 'Đánh giá trên 3 <i class=\"fa-solid fa-star text-warning\"></i>',\r\n        value: 3,\r\n    },\r\n    {\r\n        label: 'Đánh giá trên 2 <i class=\"fa-solid fa-star text-warning\"></i>',\r\n        value: 2,\r\n    },\r\n    {\r\n        label: 'Đánh giá trên 1 <i class=\"fa-solid fa-star text-warning\"></i>',\r\n        value: 1,\r\n    },\r\n];\r\n\r\nexport const IMAGES_BASE_URL = process.env.NEXT_PUBLIC_IMAGES_BASE_URL || \"\";\r\n\r\nexport const FLASH_SALE_TYPES = [\"00:00\", \"06:00\", \"12:00\", \"18:00\"];\r\nexport const CURRENT = new Date();\r\nexport const CURRENT_HOUR = CURRENT.getHours();\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAO,MAAM,cAAc;IACvB;QAAE,OAAO;QAAiB,OAAO;IAAU;IAC3C;QACI,OAAO;QACP,OAAO;IACX;IACA;QACI,OAAO;QACP,OAAO;IACX;IACA;QACI,OAAO;QACP,OAAO;IACX;IACA;QACI,OAAO;QACP,OAAO;IACX;IACA;QACI,OAAO;QACP,OAAO;IACX;IACA;QAAE,OAAO;QAAmB,OAAO;IAAW;CACjD;AAEM,MAAM,UAAU;IACnB;QACI,OAAO;QACP,OAAO;IACX;IACA;QACI,OAAO;QACP,OAAO;IACX;IACA;QACI,OAAO;QACP,OAAO;IACX;IACA;QACI,OAAO;QACP,OAAO;IACX;IACA;QACI,OAAO;QACP,OAAO;IACX;CACH;AAEM,MAAM,kBAAkB,4EAA2C;AAEnE,MAAM,mBAAmB;IAAC;IAAS;IAAS;IAAS;CAAQ;AAC7D,MAAM,UAAU,IAAI;AACpB,MAAM,eAAe,QAAQ,QAAQ","debugId":null}},
    {"offset": {"line": 83, "column": 0}, "map": {"version":3,"sources":["file:///C:/ha%20manh%20cuong/work/ctm/frontend/src/components/ui/ImageError.client.tsx"],"sourcesContent":["\"use client\"\r\nimport React, { useState } from 'react'\r\nimport Image, { ImageProps } from 'next/image'\r\n\r\ninterface ImageErrorClientProps extends Omit<ImageProps, 'src' | 'onError'> {\r\n  initialSrc: string;\r\n  alt: string;\r\n  className?: string;\r\n}\r\n\r\nfunction ImageErrorClient({ initialSrc, alt, className, ...props }: ImageErrorClientProps) {\r\n  const [imgSrc, setImgSrc] = useState<string>(initialSrc);\r\n\r\n  const handleError = () => {\r\n    setImgSrc('/images/default.jpg');\r\n  };\r\n\r\n  return (\r\n    <Image\r\n      {...props}\r\n      src={imgSrc}\r\n      alt={alt}\r\n      className={className}\r\n      onError={handleError}\r\n    />\r\n  )\r\n}\r\n\r\nexport default ImageErrorClient"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAUA,SAAS,iBAAiB,EAAE,UAAU,EAAE,GAAG,EAAE,SAAS,EAAE,GAAG,OAA8B;IACvF,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAS;IAE7C,MAAM,cAAc;QAClB,UAAU;IACZ;IAEA,qBACE,8OAAC,wIAAK;QACH,GAAG,KAAK;QACT,KAAK;QACL,KAAK;QACL,WAAW;QACX,SAAS;;;;;;AAGf;uCAEe","debugId":null}},
    {"offset": {"line": 116, "column": 0}, "map": {"version":3,"sources":["file:///C:/ha%20manh%20cuong/work/ctm/frontend/src/components/ui/ImageError.tsx"],"sourcesContent":["import React from 'react'\r\nimport { ImageProps } from 'next/image'\r\nimport { IMAGES_BASE_URL } from '@/lib/constants/constants'\r\nimport ImageErrorClient from './ImageError.client'\r\n\r\ninterface ImageErrorProps extends Omit<ImageProps, 'src' | 'onError'> {\r\n  src?: string | null;\r\n  alt: string;\r\n  className?: string;\r\n}\r\n\r\nfunction ImageError({ src, alt, className, ...props }: ImageErrorProps) {\r\n  // Server-side logic: Process src to full URL for better SEO\r\n  // Only add IMAGES_BASE_URL if src doesn't already start with http/https or /\r\n  let processedSrc = '/images/default.jpg';\r\n\r\n  if (src) {\r\n    if (src.startsWith('http://') || src.startsWith('https://') || src.startsWith('/')) {\r\n      // Already absolute URL or starts with /\r\n      processedSrc = src;\r\n    } else {\r\n      // Relative path, add IMAGES_BASE_URL\r\n      processedSrc = `${IMAGES_BASE_URL}/${src}`;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <ImageErrorClient\r\n      {...props}\r\n      initialSrc={processedSrc}\r\n      alt={alt}\r\n      className={className}\r\n    />\r\n  )\r\n}\r\n\r\nexport default ImageError"],"names":[],"mappings":";;;;;AAEA;AACA;;;;AAQA,SAAS,WAAW,EAAE,GAAG,EAAE,GAAG,EAAE,SAAS,EAAE,GAAG,OAAwB;IACpE,4DAA4D;IAC5D,6EAA6E;IAC7E,IAAI,eAAe;IAEnB,IAAI,KAAK;QACP,IAAI,IAAI,UAAU,CAAC,cAAc,IAAI,UAAU,CAAC,eAAe,IAAI,UAAU,CAAC,MAAM;YAClF,wCAAwC;YACxC,eAAe;QACjB,OAAO;YACL,qCAAqC;YACrC,eAAe,GAAG,uJAAe,CAAC,CAAC,EAAE,KAAK;QAC5C;IACF;IAEA,qBACE,8OAAC,2JAAgB;QACd,GAAG,KAAK;QACT,YAAY;QACZ,KAAK;QACL,WAAW;;;;;;AAGjB;uCAEe","debugId":null}},
    {"offset": {"line": 155, "column": 0}, "map": {"version":3,"sources":["file:///C:/ha%20manh%20cuong/work/ctm/frontend/src/lib/api/auth.ts"],"sourcesContent":["import { apiFetch, apiFetchCustomers, apiFetchSites } from \"./api\";\r\nimport { UserT } from \"@/types/common.types\";\r\n\r\ntype LoginBodyT = {\r\n    phone: string;\r\n    password: string;\r\n    captcha?: string;\r\n};\r\n\r\ntype RegisterBodyT = {\r\n    phone: string;\r\n    name: string;\r\n    referral_code?: string;\r\n};\r\n\r\ntype StoreRegisterBodyT = {\r\n    phone: string;\r\n    password: string;\r\n    captcha: string;\r\n};\r\n\r\ntype forgotPasswordBodyT = {\r\n    phone: string;\r\n    captcha?: string;\r\n};\r\ntype confirmForgetPasswordBodyT = {\r\n    phone: string;\r\n    reference_code: string;\r\n    password: string;\r\n};\r\n\r\ntype RequestOtpBodyT = {\r\n    phone: string;\r\n    purpose: \"verification\" | \"forgot-password\" | \"register\";\r\n};\r\n\r\ntype ValidateOtpBodyT = {\r\n    phone: string;\r\n    otp: string;\r\n    purpose: \"verification\" | \"forgot-password\" | \"register\";\r\n};\r\n\r\ntype OtpResponseT = {\r\n    success: boolean;\r\n    message: string;\r\n    otpId?: string; // ID để tracking OTP session\r\n    expiresIn?: number; // Thời gian hết hạn (seconds)\r\n    maskedPhone?: string; // Số điện thoại đã che: *******9897\r\n};\r\n\r\ntype ValidateOtpResponseT = {\r\n    success: boolean;\r\n    message: string;\r\n    error?: string;\r\n    token?: string; // Token sau khi verify thành công\r\n};\r\n\r\nexport const requestOtp = async (\r\n    body: RequestOtpBodyT\r\n): Promise<OtpResponseT> => {\r\n    const { phone, purpose } = body;\r\n\r\n    // Trong thực tế:\r\n    // const res = await apiFetch(\"/auth/request-otp\", {\r\n    //     method: \"POST\",\r\n    //     body: JSON.stringify({ phone, purpose }),\r\n    // });\r\n    // return res.data;\r\n\r\n    // Mock response\r\n    await new Promise((resolve) => setTimeout(resolve, 1000)); // Simulate API delay\r\n\r\n    // Che số điện thoại: chỉ hiện 4 số cuối\r\n    const maskedPhone = phone.replace(/(\\d{3})\\d+(\\d{4})/, \"$1*****$2\");\r\n\r\n    return {\r\n        success: true,\r\n        message: \"OTP đã được gửi đến số điện thoại của bạn\",\r\n        otpId: `otp_${Date.now()}`,\r\n        expiresIn: 300, // 5 phút\r\n        maskedPhone: maskedPhone,\r\n    };\r\n};\r\n\r\nexport const validateOtp = async (\r\n    body: ValidateOtpBodyT\r\n): Promise<ValidateOtpResponseT> => {\r\n    const { phone, otp, purpose } = body;\r\n\r\n    // Trong thực tế:\r\n    // const res = await apiFetch(\"/auth/validate-otp\", {\r\n    //     method: \"POST\",\r\n    //     body: JSON.stringify({ phone, otp, purpose }),\r\n    // });\r\n    // return res.data;\r\n\r\n    // Mock validation\r\n\r\n    // Demo: OTP đúng là \"123456\"\r\n    if (otp !== \"123456\") {\r\n        return {\r\n            success: false,\r\n            message: \"Mã OTP không đúng\",\r\n            error: \"INVALID_OTP\",\r\n        };\r\n    }\r\n\r\n    return {\r\n        success: true,\r\n        message: \"Xác thực thành công\",\r\n        token: `verified_${Date.now()}_${phone}`,\r\n    };\r\n};\r\n\r\nexport const resendOtp = async (\r\n    phone: string,\r\n    purpose: RequestOtpBodyT[\"purpose\"]\r\n): Promise<OtpResponseT> => {\r\n    return requestOtp({ phone, purpose });\r\n};\r\n\r\nexport const getProfile = async (): Promise<UserT> => {\r\n    const resdata = await apiFetchCustomers(\"/accounts/getProfile\");\r\n    return resdata;\r\n    // return {\r\n    //     id: \"1\",\r\n    //     name: \"Nguyen Van AAAAAAAAAAAAAA\",\r\n    //     phone: \"0123456789\",\r\n    //     email: \"nguyen.van.a@example.com\",\r\n    //     avatar: \"https://ca-ctm.systems.com.vn/styles/avatar.jpg\",\r\n    //     gender: \"male\",\r\n    //     birthday: new Date(\"1990-01-01\"),\r\n    //     google: \"google-id\",\r\n    //     facebook: \"facebook-id\",\r\n    //     createdAt: new Date(\"2020-01-01\"),\r\n    //     updatedAt: new Date(\"2020-01-01\"),\r\n    // };\r\n};\r\nexport const logIn = async (body: LoginBodyT) => {\r\n    const { phone, password, captcha } = body;\r\n    const resdata = await apiFetchCustomers(\"/login\", {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ phone, password, captcha }),\r\n    });\r\n    return resdata;\r\n};\r\n\r\nexport const refreshToken = async () => {\r\n    const resdata = await apiFetchCustomers(\"/refreshToken\", {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${localStorage.getItem(\"refreshToken\")}`,\r\n        },\r\n    });\r\n    return resdata;\r\n};\r\n\r\nexport const logOut = async () => {\r\n    return await apiFetchCustomers(\"/logout\", {\r\n        method: \"POST\",\r\n    });\r\n};\r\n\r\nexport const register = async (body: RegisterBodyT) => {\r\n    const { phone, name, referral_code } = body;\r\n\r\n    const resdata = await apiFetchCustomers(`/register`, {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ phone, name, referral_code }),\r\n    });\r\n\r\n    return resdata;\r\n};\r\nexport const confirmRegistration = async ({\r\n    phone,\r\n    reference_code,\r\n    password,\r\n    confirmPassword,\r\n}: {\r\n    phone: string;\r\n    reference_code: string;\r\n    password: string;\r\n    confirmPassword: string;\r\n}) => {\r\n    const res = await apiFetchCustomers(\"/registerConfirmOtp\", {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({\r\n            phone,\r\n            reference_code,\r\n            password,\r\n            confirmPassword,\r\n        }),\r\n    });\r\n    return res;\r\n};\r\n\r\nexport const forgotPassword = async (body: forgotPasswordBodyT) => {\r\n    const resdata = await apiFetchCustomers(\"/forget\", {\r\n        method: \"POST\",\r\n        credentials: \"include\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(body),\r\n    });\r\n    return resdata;\r\n};\r\n\r\nexport const confirmForgotPassword = async (\r\n    body: confirmForgetPasswordBodyT\r\n) => {\r\n    const resdata = await apiFetchSites(\"/forgetPassword\", {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"Secret-Key\": `${process.env.NEXT_PUBLIC_SECRET_KEY_CUSTOMERS}`,\r\n        },\r\n        body: JSON.stringify({ ...body }),\r\n    });\r\n    return resdata;\r\n};\r\n\r\nexport const requestOtpForForgotPassword = async (body: {\r\n    phone: string;\r\n}): Promise<any> => {\r\n    const resdata = await apiFetch(\"/forgetResendOtp\", {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"Secret-Key\": `${process.env.NEXT_PUBLIC_SECRET_KEY_CUSTOMERS}`,\r\n        },\r\n        body: JSON.stringify(body),\r\n    });\r\n    return resdata;\r\n};\r\n\r\nexport const storeRegister = async (body: StoreRegisterBodyT) => {\r\n    // const res = await apiFetch(\"/store-auth/register\", {\r\n    //     method: \"POST\",\r\n    //     body: JSON.stringify(body),\r\n    // });\r\n    // return res;\r\n    return true;\r\n};\r\n\r\nexport const storeForgotPassword = async (body: forgotPasswordBodyT) => {\r\n    // const res = await apiFetch(\"/store-auth/forgot-password\", {\r\n    //     method: \"POST\",\r\n    //     body: JSON.stringify(body),\r\n    // });\r\n    // return res;\r\n    return true;\r\n};\r\n\r\nexport const storeLogin = async (body: LoginBodyT) => {\r\n    const { phone, password } = body;\r\n    // Fetch o day\r\n    // Gia su thanh cong\r\n    if (password !== \"11111111\") {\r\n        return {\r\n            accessToken: \"\",\r\n            success: false,\r\n            error: \"Mật khẩu không đúng\",\r\n        };\r\n    }\r\n    const data = {\r\n        error: \"\",\r\n        success: true,\r\n        accessToken: \"fake-jwt-token-store\",\r\n        user: {\r\n            id: 1,\r\n            name: \"Cua Hang A\",\r\n            phone: phone,\r\n            email: \"cua.hang.a@example.com\",\r\n            avatar: \"https://ca-ctm.systems.com.vn/static/1/images/shop/9.png\",\r\n        },\r\n    };\r\n\r\n    return data;\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AAyDO,MAAM,aAAa,OACtB;IAEA,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG;IAE3B,iBAAiB;IACjB,oDAAoD;IACpD,sBAAsB;IACtB,gDAAgD;IAChD,MAAM;IACN,mBAAmB;IAEnB,gBAAgB;IAChB,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS,QAAQ,qBAAqB;IAEhF,wCAAwC;IACxC,MAAM,cAAc,MAAM,OAAO,CAAC,qBAAqB;IAEvD,OAAO;QACH,SAAS;QACT,SAAS;QACT,OAAO,CAAC,IAAI,EAAE,KAAK,GAAG,IAAI;QAC1B,WAAW;QACX,aAAa;IACjB;AACJ;AAEO,MAAM,cAAc,OACvB;IAEA,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,OAAO,EAAE,GAAG;IAEhC,iBAAiB;IACjB,qDAAqD;IACrD,sBAAsB;IACtB,qDAAqD;IACrD,MAAM;IACN,mBAAmB;IAEnB,kBAAkB;IAElB,6BAA6B;IAC7B,IAAI,QAAQ,UAAU;QAClB,OAAO;YACH,SAAS;YACT,SAAS;YACT,OAAO;QACX;IACJ;IAEA,OAAO;QACH,SAAS;QACT,SAAS;QACT,OAAO,CAAC,SAAS,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,OAAO;IAC5C;AACJ;AAEO,MAAM,YAAY,OACrB,OACA;IAEA,OAAO,WAAW;QAAE;QAAO;IAAQ;AACvC;AAEO,MAAM,aAAa;IACtB,MAAM,UAAU,MAAM,IAAA,6IAAiB,EAAC;IACxC,OAAO;AACP,WAAW;AACX,eAAe;AACf,yCAAyC;AACzC,2BAA2B;AAC3B,yCAAyC;AACzC,iEAAiE;AACjE,sBAAsB;AACtB,wCAAwC;AACxC,2BAA2B;AAC3B,+BAA+B;AAC/B,yCAAyC;AACzC,yCAAyC;AACzC,KAAK;AACT;AACO,MAAM,QAAQ,OAAO;IACxB,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,OAAO,EAAE,GAAG;IACrC,MAAM,UAAU,MAAM,IAAA,6IAAiB,EAAC,UAAU;QAC9C,QAAQ;QACR,aAAa;QACb,SAAS;YACL,gBAAgB;QACpB;QACA,MAAM,KAAK,SAAS,CAAC;YAAE;YAAO;YAAU;QAAQ;IACpD;IACA,OAAO;AACX;AAEO,MAAM,eAAe;IACxB,MAAM,UAAU,MAAM,IAAA,6IAAiB,EAAC,iBAAiB;QACrD,QAAQ;QACR,aAAa;QACb,SAAS;YACL,gBAAgB;YAChB,eAAe,CAAC,OAAO,EAAE,aAAa,OAAO,CAAC,iBAAiB;QACnE;IACJ;IACA,OAAO;AACX;AAEO,MAAM,SAAS;IAClB,OAAO,MAAM,IAAA,6IAAiB,EAAC,WAAW;QACtC,QAAQ;IACZ;AACJ;AAEO,MAAM,WAAW,OAAO;IAC3B,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,aAAa,EAAE,GAAG;IAEvC,MAAM,UAAU,MAAM,IAAA,6IAAiB,EAAC,CAAC,SAAS,CAAC,EAAE;QACjD,QAAQ;QACR,aAAa;QACb,SAAS;YACL,gBAAgB;QACpB;QACA,MAAM,KAAK,SAAS,CAAC;YAAE;YAAO;YAAM;QAAc;IACtD;IAEA,OAAO;AACX;AACO,MAAM,sBAAsB,OAAO,EACtC,KAAK,EACL,cAAc,EACd,QAAQ,EACR,eAAe,EAMlB;IACG,MAAM,MAAM,MAAM,IAAA,6IAAiB,EAAC,uBAAuB;QACvD,QAAQ;QACR,SAAS;YACL,gBAAgB;QACpB;QACA,MAAM,KAAK,SAAS,CAAC;YACjB;YACA;YACA;YACA;QACJ;IACJ;IACA,OAAO;AACX;AAEO,MAAM,iBAAiB,OAAO;IACjC,MAAM,UAAU,MAAM,IAAA,6IAAiB,EAAC,WAAW;QAC/C,QAAQ;QACR,aAAa;QACb,SAAS;YACL,gBAAgB;QACpB;QACA,MAAM,KAAK,SAAS,CAAC;IACzB;IACA,OAAO;AACX;AAEO,MAAM,wBAAwB,OACjC;IAEA,MAAM,UAAU,MAAM,IAAA,yIAAa,EAAC,mBAAmB;QACnD,QAAQ;QACR,SAAS;YACL,gBAAgB;YAChB,cAAc,oDAAiD;QACnE;QACA,MAAM,KAAK,SAAS,CAAC;YAAE,GAAG,IAAI;QAAC;IACnC;IACA,OAAO;AACX;AAEO,MAAM,8BAA8B,OAAO;IAG9C,MAAM,UAAU,MAAM,IAAA,oIAAQ,EAAC,oBAAoB;QAC/C,QAAQ;QACR,SAAS;YACL,gBAAgB;YAChB,cAAc,oDAAiD;QACnE;QACA,MAAM,KAAK,SAAS,CAAC;IACzB;IACA,OAAO;AACX;AAEO,MAAM,gBAAgB,OAAO;IAChC,uDAAuD;IACvD,sBAAsB;IACtB,kCAAkC;IAClC,MAAM;IACN,cAAc;IACd,OAAO;AACX;AAEO,MAAM,sBAAsB,OAAO;IACtC,8DAA8D;IAC9D,sBAAsB;IACtB,kCAAkC;IAClC,MAAM;IACN,cAAc;IACd,OAAO;AACX;AAEO,MAAM,aAAa,OAAO;IAC7B,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG;IAC5B,cAAc;IACd,oBAAoB;IACpB,IAAI,aAAa,YAAY;QACzB,OAAO;YACH,aAAa;YACb,SAAS;YACT,OAAO;QACX;IACJ;IACA,MAAM,OAAO;QACT,OAAO;QACP,SAAS;QACT,aAAa;QACb,MAAM;YACF,IAAI;YACJ,MAAM;YACN,OAAO;YACP,OAAO;YACP,QAAQ;QACZ;IACJ;IAEA,OAAO;AACX","debugId":null}},
    {"offset": {"line": 398, "column": 0}, "map": {"version":3,"sources":["file:///C:/ha%20manh%20cuong/work/ctm/frontend/src/lib/api/cart.ts"],"sourcesContent":["import { CartItemT, CartT } from \"@/types/common.types\";\r\nimport { apiFetch, apiFetchCustomers } from \"@/lib/api/api\";\r\nimport { vouchersData } from \"@/assets/data/Vouchers\";\r\n\r\nexport const getCart = async (): Promise<CartT> => {\r\n    const resdata = await apiFetchCustomers(\"/cart/getDetail\");\r\n\r\n    return resdata;\r\n};\r\n\r\nexport const updateCart = async (\r\n    product_id: number,\r\n    product_price_id: number,\r\n    quantity: number\r\n): Promise<any> => {\r\n    const resdata = await apiFetchCustomers(\"/cart/edit\", {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ product_id, quantity, product_price_id }),\r\n    });\r\n\r\n    return resdata;\r\n};\r\nexport const removeItems = async (cartItemIds: number[]): Promise<boolean> => {\r\n    const resdata = await apiFetchCustomers(`/cart/CartRemoveProduct`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ cartItemIds: cartItemIds }),\r\n    });\r\n    return resdata;\r\n};\r\n\r\nexport const getSummaryCart = async (): Promise<{\r\n    itemTotal: number;\r\n    shippingFee: number;\r\n    totalDiscount: number;\r\n    finalTotal: number;\r\n}> => {\r\n    const resdata = await apiFetchCustomers(\"/cart/getCartSummary\");\r\n    return resdata;\r\n};\r\n\r\nexport const applyCoupon = async (couponCode: string): Promise<any> => {\r\n    // const resdata = await apiFetch('/cart/apply-coupon', {\r\n    //     method: \"POST\",\r\n    //     body: JSON.stringify({ couponCode }),\r\n    // });\r\n    // return resdata;\r\n    return {\r\n        total: 250000,\r\n        discount: 50001,\r\n        shippingFee: 15000,\r\n        finalTotal: 214999,\r\n    };\r\n};\r\n\r\nexport const ToggleSelectionStatus = async (\r\n    cartItemIds: number[],\r\n    isOrder: 0 | 1\r\n): Promise<boolean> => {\r\n    const resdata = await apiFetchCustomers(\"/cart/toggleSelectionStatus\", {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ cartItemIds, isOrder }),\r\n    });\r\n    return resdata;\r\n};\r\n\r\nexport const getTotalItemsInCart = async (): Promise<number> => {\r\n    const resdata = await apiFetchCustomers(\"/cart/CartCountProduct\");\r\n    return resdata?.total_quantity || 0;\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AACA;;AAGO,MAAM,UAAU;IACnB,MAAM,UAAU,MAAM,IAAA,6IAAiB,EAAC;IAExC,OAAO;AACX;AAEO,MAAM,aAAa,OACtB,YACA,kBACA;IAEA,MAAM,UAAU,MAAM,IAAA,6IAAiB,EAAC,cAAc;QAClD,QAAQ;QACR,SAAS;YACL,gBAAgB;QACpB;QACA,MAAM,KAAK,SAAS,CAAC;YAAE;YAAY;YAAU;QAAiB;IAClE;IAEA,OAAO;AACX;AACO,MAAM,cAAc,OAAO;IAC9B,MAAM,UAAU,MAAM,IAAA,6IAAiB,EAAC,CAAC,uBAAuB,CAAC,EAAE;QAC/D,QAAQ;QACR,SAAS;YACL,gBAAgB;QACpB;QACA,MAAM,KAAK,SAAS,CAAC;YAAE,aAAa;QAAY;IACpD;IACA,OAAO;AACX;AAEO,MAAM,iBAAiB;IAM1B,MAAM,UAAU,MAAM,IAAA,6IAAiB,EAAC;IACxC,OAAO;AACX;AAEO,MAAM,cAAc,OAAO;IAC9B,yDAAyD;IACzD,sBAAsB;IACtB,4CAA4C;IAC5C,MAAM;IACN,kBAAkB;IAClB,OAAO;QACH,OAAO;QACP,UAAU;QACV,aAAa;QACb,YAAY;IAChB;AACJ;AAEO,MAAM,wBAAwB,OACjC,aACA;IAEA,MAAM,UAAU,MAAM,IAAA,6IAAiB,EAAC,+BAA+B;QACnE,QAAQ;QACR,SAAS;YACL,gBAAgB;QACpB;QACA,MAAM,KAAK,SAAS,CAAC;YAAE;YAAa;QAAQ;IAChD;IACA,OAAO;AACX;AAEO,MAAM,sBAAsB;IAC/B,MAAM,UAAU,MAAM,IAAA,6IAAiB,EAAC;IACxC,OAAO,SAAS,kBAAkB;AACtC","debugId":null}},
    {"offset": {"line": 484, "column": 0}, "map": {"version":3,"sources":["file:///C:/ha%20manh%20cuong/work/ctm/frontend/src/lib/api/wishlist.ts"],"sourcesContent":["import { ProductT } from \"@/types/common.types\";\r\nimport { apiFetchCustomers } from \"./api\";\r\nimport { data } from \"@/assets/data/Home\";\r\n\r\nexport const getWishList = async (): Promise<ProductT[]> => {\r\n    const resdata = await apiFetchCustomers(\"/productwishlist/getWishlist\");\r\n    return resdata;\r\n};\r\n\r\nexport const addToWishList = async (productId: number): Promise<unknown> => {\r\n    const resdata = await apiFetchCustomers(\r\n        \"/productwishlist/toggleWishlist/\" + productId\r\n    );\r\n    return resdata;\r\n};\r\n\r\nexport const removeWishListItem = async (\r\n    productId: number\r\n): Promise<boolean> => {\r\n    const resdata = await apiFetchCustomers(\r\n        \"/productwishlist/toggleWishlist/\" + productId\r\n    );\r\n    return resdata;\r\n};\r\n\r\nexport const fetchProductsInWishList = async (): Promise<ProductT[]> => {\r\n    const resdata = await apiFetchCustomers(\"/productwishlist/getWishlist\");\r\n    return resdata;\r\n};\r\nexport const fetchWishListIds = async (): Promise<number[]> => {\r\n    const resdata = await apiFetchCustomers(\r\n        \"/productwishlist/getWishlistProductIds\"\r\n    );\r\n    return resdata;\r\n};\r\n\r\nexport const getWishListCount = async (): Promise<number> => {\r\n    // const res = await apiFetch(\"/wishlist/count\");\r\n    // return res.count;\r\n    return 1;\r\n};\r\n\r\nexport const checkIsInWishlist = async (\r\n    productId: number\r\n): Promise<boolean> => {\r\n    // const res = await apiFetch(`/wishlist/check/${productId}`);\r\n    // return res;\r\n    return true;\r\n};\r\n\r\nexport const getTotalItems = async (): Promise<number> => {\r\n    const resdata = await apiFetchCustomers(\"/productwishlist/countWishlist\");\r\n    return resdata?.count || 0;\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AACA;;AAGO,MAAM,cAAc;IACvB,MAAM,UAAU,MAAM,IAAA,6IAAiB,EAAC;IACxC,OAAO;AACX;AAEO,MAAM,gBAAgB,OAAO;IAChC,MAAM,UAAU,MAAM,IAAA,6IAAiB,EACnC,qCAAqC;IAEzC,OAAO;AACX;AAEO,MAAM,qBAAqB,OAC9B;IAEA,MAAM,UAAU,MAAM,IAAA,6IAAiB,EACnC,qCAAqC;IAEzC,OAAO;AACX;AAEO,MAAM,0BAA0B;IACnC,MAAM,UAAU,MAAM,IAAA,6IAAiB,EAAC;IACxC,OAAO;AACX;AACO,MAAM,mBAAmB;IAC5B,MAAM,UAAU,MAAM,IAAA,6IAAiB,EACnC;IAEJ,OAAO;AACX;AAEO,MAAM,mBAAmB;IAC5B,iDAAiD;IACjD,oBAAoB;IACpB,OAAO;AACX;AAEO,MAAM,oBAAoB,OAC7B;IAEA,8DAA8D;IAC9D,cAAc;IACd,OAAO;AACX;AAEO,MAAM,gBAAgB;IACzB,MAAM,UAAU,MAAM,IAAA,6IAAiB,EAAC;IACxC,OAAO,SAAS,SAAS;AAC7B","debugId":null}},
    {"offset": {"line": 560, "column": 0}, "map": {"version":3,"sources":["file:///C:/ha%20manh%20cuong/work/ctm/frontend/src/components/features/provider/AuthProvider.tsx"],"sourcesContent":["\"use client\"\r\nimport { getProfile, logOut } from \"@/lib/api/auth\";\r\nimport { getCart, getTotalItemsInCart } from \"@/lib/api/cart\";\r\nimport { fetchWishListIds, getTotalItems } from \"@/lib/api/wishlist\";\r\nimport { CartT, UserT } from \"@/types/common.types\";\r\nimport { usePathname, useRouter } from \"next/navigation\";\r\nimport { createContext, useContext, useEffect, useState } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\n\r\n\r\ntype ContextType = {\r\n  hasAuth: boolean,\r\n  setHasAuth: (hasAuth: boolean) => void,\r\n  user?: UserT | null,\r\n  setUser?: (user: UserT | null) => void,\r\n  numberOfStoreInCart: number,\r\n  handleGetNumberOfStoreInCart: () => void,\r\n  numberOfItemsInWishlist: number,\r\n  handleGetNumberOfItemsInWishlist: () => void,\r\n  handleLogout: () => void,\r\n  handleGetProfile: () => void,\r\n  handleGetIds: () => void,\r\n  wishlistIds?: number[],\r\n  cart?: CartT | null,\r\n  handleGetCart: () => void,\r\n\r\n}\r\nconst AuthContext = createContext<ContextType>({\r\n  hasAuth: false,\r\n  setHasAuth: () => { },\r\n  user: null,\r\n  setUser: () => { },\r\n  numberOfStoreInCart: 0,\r\n  handleGetNumberOfStoreInCart: () => { },\r\n  numberOfItemsInWishlist: 0,\r\n  handleGetNumberOfItemsInWishlist: () => { },\r\n  handleLogout: () => { },\r\n  handleGetProfile: () => { },\r\n  handleGetIds: () => { },\r\n  wishlistIds: [],\r\n  cart: null,\r\n  handleGetCart: () => { },\r\n});\r\n\r\nexport default function AuthProvider({ children }: {\r\n  children: React.ReactNode\r\n}) {\r\n  const [hasAuth, setHasAuth] = useState<boolean>(false);\r\n  const [user, setUser] = useState<UserT | null>(null);\r\n  const [numberOfStoreInCart, setNumberOfStoreInCart] = useState<number>(0);\r\n  const [numberOfItemsInWishlist, setNumberOfItemsInWishlist] = useState<number>(0);\r\n  const [wishlistIds, setWishlistIds] = useState<number[]>([]);\r\n  const [cart, setCart] = useState<CartT | null>(null);\r\n  const [isChecking, setIsChecking] = useState<boolean>(true);\r\n  const pathname = usePathname();\r\n  const router = useRouter();\r\n\r\n  const handleGetNumberOfStoreInCart = async () => {\r\n    const resdata = await getTotalItemsInCart();\r\n\r\n    setNumberOfStoreInCart(resdata);\r\n  }\r\n  const handleGetNumberOfItemsInWishlist = async () => {\r\n    const resdata = await getTotalItems();\r\n    setNumberOfItemsInWishlist(resdata);\r\n  }\r\n  const handleGetIds = async () => {\r\n    const resdata = await fetchWishListIds();\r\n    setWishlistIds(resdata);\r\n  }\r\n\r\n  const handleGetCart = async () => {\r\n    const resdata = await getCart();\r\n    setCart(resdata);\r\n  }\r\n\r\n\r\n  const handleGetProfile = async () => {\r\n    try {\r\n      const res = await getProfile();\r\n      setUser(res);\r\n      localStorage.setItem(\"user\", JSON.stringify(res));\r\n\r\n    } catch (error) {\r\n      console.error(\"Error fetching profile:\", error);\r\n      setUser(null);\r\n    }\r\n  }\r\n\r\n\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"accessToken\");\r\n\r\n    // Nếu có token → set hasAuth = true\r\n    if (token) {\r\n      setHasAuth(true);\r\n\r\n    } else {\r\n      setHasAuth(false);\r\n    }\r\n\r\n    // Redirect nếu đã login mà vào trang login/register\r\n    if (pathname.includes(\"customers/login\") || pathname.includes(\"customers/register\") || pathname.includes(\"customers/forgotPassword\") || pathname.includes(\"customers/confirm\")) {\r\n      if (token) {\r\n        toast.info(\"Vui lòng đăng xuất để tiếp tục\");\r\n        router.replace(\"/\");\r\n        return;\r\n      }\r\n    }\r\n\r\n    // Check auth cho các trang customers (trừ login/register/forgot-password)\r\n    if (pathname.includes(\"customers\") &&\r\n      !pathname.includes(\"customers/login\") &&\r\n      !pathname.includes(\"customers/register\") &&\r\n      !pathname.includes(\"customers/forgotPassword\") &&\r\n      !pathname.includes(\"customers/confirm\")\r\n    ) {\r\n      if (!token) {\r\n        toast.info(\"Vui lòng đăng nhập để tiếp tục\");\r\n        router.replace(\"/customers/login\");\r\n        return;\r\n      }\r\n    }\r\n\r\n    // Đã check xong, cho phép render\r\n    setIsChecking(false);\r\n  }, [pathname, router]);\r\n  useEffect(() => {\r\n    if (hasAuth) {\r\n      handleGetProfile();\r\n      handleGetNumberOfStoreInCart();\r\n      handleGetNumberOfItemsInWishlist();\r\n      handleGetIds();\r\n      handleGetCart();\r\n    } else {\r\n      setUser(null);\r\n      setWishlistIds([]);\r\n      setCart(null);\r\n    }\r\n  }, [hasAuth]);\r\n  const handleLogout = async () => {\r\n    const data = await logOut();\r\n    if (data) {\r\n      localStorage.removeItem(\"accessToken\");\r\n      localStorage.removeItem(\"user\");\r\n      setHasAuth(false);\r\n\r\n      // setUser(null); // Cập nhật state\r\n      router.replace(\"/customers/login\");\r\n    }\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ hasAuth, setHasAuth, user, setUser, numberOfStoreInCart, handleGetNumberOfStoreInCart, numberOfItemsInWishlist, handleGetNumberOfItemsInWishlist, handleLogout, handleGetProfile, wishlistIds, handleGetIds, cart, handleGetCart }}>\r\n      {\r\n        children\r\n      }\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nconst useAuthContext = () => {\r\n  return useContext(AuthContext);\r\n}\r\n\r\nexport { useAuthContext };"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 720, "column": 0}, "map": {"version":3,"sources":["file:///C:/ha%20manh%20cuong/work/ctm/frontend/src/components/features/modal/Modal.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { ReactNode } from 'react'\r\nimport { createPortal } from 'react-dom';\r\nimport { motion } from \"framer-motion\";\r\ninterface ModalProps {\r\n  onClose: () => void;\r\n  id?: string;\r\n  title?: string;\r\n  description?: string;\r\n  classNameRoot?: string;\r\n  classNameMainModal?: string;\r\n  children: ReactNode;\r\n}\r\n\r\nfunction Modal({ onClose, id, title, description, classNameRoot, classNameMainModal, children }: ModalProps) {\r\n  return createPortal(\r\n    <div className={`${classNameRoot}`}>\r\n      {/* Overlay + Modal */}\r\n      <motion.div\r\n\r\n        className=\"theme-modal show\"\r\n        tabIndex={-1}\r\n        id={id}\r\n        aria-hidden=\"false\"\r\n        style={{\r\n          display: \"block\",\r\n          position: \"fixed\",\r\n          top: 0,\r\n          left: 0,\r\n          width: \"100%\",\r\n          height: \"100vh\",\r\n          zIndex: 1050,\r\n        }}\r\n        initial={{ opacity: 0 }}\r\n        animate={{ opacity: 1 }}\r\n        exit={{ opacity: 0 }}\r\n        transition={{ duration: 0.3 }}\r\n      >\r\n        {/* --- Lớp phủ mờ nền --- */}\r\n        <div\r\n          className=\"modal-overlay\"\r\n          style={{\r\n            position: \"absolute\",\r\n            top: 0,\r\n            left: 0,\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            backgroundColor: \"rgba(0, 0, 0, 0.5)\",\r\n            zIndex: 1,\r\n          }}\r\n          onClick={\r\n            () => {\r\n              onClose();\r\n            }\r\n          }\r\n        ></div>\r\n\r\n        {/* --- Modal chính --- */}\r\n        <div\r\n          className={`modal-dialog modal-dialog-centered modal-fullscreen-sm-down ${classNameMainModal}`}\r\n          style={{\r\n            position: \"relative\",\r\n            zIndex: 2,\r\n            maxHeight: \"90vh\",\r\n            margin: \"auto\",\r\n          }}\r\n        >\r\n          <div className=\"modal-content  background-image-2 rounded-3 shadow-lg border-0 p-3\" style={{\r\n            maxHeight: \"90vh\",\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n          }}>\r\n            <div className=\"modal-header border-0 flex-col  pb-2\"\r\n              style={{\r\n                alignItems: \"start\",\r\n                justifyContent: \"start\",\r\n                flexShrink: 0,\r\n              }}\r\n            >\r\n              {title && (<h5 className=\"modal-title fw-bold w-100\">{title}</h5>)}\r\n              {description && (<p className='mt-1 text-content text-start'>{description}</p>)}\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn-close\"\r\n                aria-label=\"Close\"\r\n                onClick={() => {\r\n                  onClose();\r\n                }}\r\n              >\r\n                <i className=\"fa-solid fa-xmark\"></i>\r\n              </button>\r\n            </div>\r\n\r\n\r\n            <div\r\n              style={{\r\n                width: \"100%\",\r\n                height: \"100%\",\r\n                overflowY: \"scroll\",\r\n                overflowX: \"hidden\"\r\n              }}\r\n              className='hide-scrollbar'\r\n            >\r\n              {children}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </motion.div>\r\n    </div>,\r\n    document.body\r\n  );\r\n}\r\n\r\n\r\nexport default Modal"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAcA,SAAS,MAAM,EAAE,OAAO,EAAE,EAAE,EAAE,KAAK,EAAE,WAAW,EAAE,aAAa,EAAE,kBAAkB,EAAE,QAAQ,EAAc;IACzG,qBAAO,IAAA,4NAAY,gBACjB,8OAAC;QAAI,WAAW,GAAG,eAAe;kBAEhC,cAAA,8OAAC,oMAAM,CAAC,GAAG;YAET,WAAU;YACV,UAAU,CAAC;YACX,IAAI;YACJ,eAAY;YACZ,OAAO;gBACL,SAAS;gBACT,UAAU;gBACV,KAAK;gBACL,MAAM;gBACN,OAAO;gBACP,QAAQ;gBACR,QAAQ;YACV;YACA,SAAS;gBAAE,SAAS;YAAE;YACtB,SAAS;gBAAE,SAAS;YAAE;YACtB,MAAM;gBAAE,SAAS;YAAE;YACnB,YAAY;gBAAE,UAAU;YAAI;;8BAG5B,8OAAC;oBACC,WAAU;oBACV,OAAO;wBACL,UAAU;wBACV,KAAK;wBACL,MAAM;wBACN,OAAO;wBACP,QAAQ;wBACR,iBAAiB;wBACjB,QAAQ;oBACV;oBACA,SACE;wBACE;oBACF;;;;;;8BAKJ,8OAAC;oBACC,WAAW,CAAC,4DAA4D,EAAE,oBAAoB;oBAC9F,OAAO;wBACL,UAAU;wBACV,QAAQ;wBACR,WAAW;wBACX,QAAQ;oBACV;8BAEA,cAAA,8OAAC;wBAAI,WAAU;wBAAqE,OAAO;4BACzF,WAAW;4BACX,SAAS;4BACT,eAAe;wBACjB;;0CACE,8OAAC;gCAAI,WAAU;gCACb,OAAO;oCACL,YAAY;oCACZ,gBAAgB;oCAChB,YAAY;gCACd;;oCAEC,uBAAU,8OAAC;wCAAG,WAAU;kDAA6B;;;;;;oCACrD,6BAAgB,8OAAC;wCAAE,WAAU;kDAAgC;;;;;;kDAC9D,8OAAC;wCACC,MAAK;wCACL,WAAU;wCACV,cAAW;wCACX,SAAS;4CACP;wCACF;kDAEA,cAAA,8OAAC;4CAAE,WAAU;;;;;;;;;;;;;;;;;0CAKjB,8OAAC;gCACC,OAAO;oCACL,OAAO;oCACP,QAAQ;oCACR,WAAW;oCACX,WAAW;gCACb;gCACA,WAAU;0CAET;;;;;;;;;;;;;;;;;;;;;;;;;;;cAMX,SAAS,IAAI;AAEjB;uCAGe","debugId":null}},
    {"offset": {"line": 887, "column": 0}, "map": {"version":3,"sources":["file:///C:/ha%20manh%20cuong/work/ctm/frontend/src/components/features/modal/ModalLogin.tsx"],"sourcesContent":["\"use client\";\r\nimport ImageError from \"@/components/ui/ImageError\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { getProfile, logIn } from \"@/lib/api/auth\";\r\nimport { useAuthContext } from \"@/components/features/provider/AuthProvider\";\r\nimport Modal from \"@/components/features/modal/Modal\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { resetSessionExpiredFlag } from \"@/lib/api/api\";\r\nimport { toast } from \"react-toastify\";\r\n\r\ninterface ModalLoginProps {\r\n  onClose: () => void;\r\n}\r\n\r\nfunction ModalLogin({ onClose }: ModalLoginProps) {\r\n  // const { setIsOpen } = useModalLoginContext();\r\n  const router = useRouter();\r\n  const { setHasAuth } = useAuthContext();\r\n  const [phone, setPhone] = useState<string>(\"\");\r\n  const [password, setPassword] = useState<string>(\"\");\r\n  const [rememberMe, setRememberMe] = useState<boolean>(false);\r\n  const handleLogin = async () => {\r\n    const data = await logIn({ phone, password });\r\n    if (!data) {\r\n      sessionStorage.setItem(\"login_temp\", JSON.stringify({ phone, password, rememberMe, error: data.error }));\r\n      router.push(\"/customers/login\");\r\n    }\r\n    else {\r\n      toast.success(\"Đăng nhập thành công\");\r\n      if (rememberMe) {\r\n        localStorage.setItem(\"login_saved\", JSON.stringify({ phone, password }));\r\n      }\r\n      sessionStorage.removeItem(\"login_temp\");\r\n      localStorage.setItem(\"accessToken\", data.accessToken);\r\n      localStorage.setItem(\"refreshToken\", data.refreshToken);\r\n      resetSessionExpiredFlag(); // Reset flag khi login thành công\r\n      const user = await getProfile();\r\n      localStorage.setItem(\"user\", JSON.stringify(user));\r\n      setHasAuth(true);\r\n      onClose();\r\n\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    const saved = localStorage.getItem(\"login_saved\");\r\n    if (saved) {\r\n      const obj = JSON.parse(saved);\r\n      setPhone(obj.phone);\r\n      setPassword(obj.password);\r\n      setRememberMe(true);\r\n    }\r\n  }, [])\r\n  return (\r\n    <Modal onClose={onClose} title=\"Đăng nhập\" classNameMainModal=\"modal-lg\" id=\"modalLogin\">\r\n      <div className=\"modal-body pt-3 pt-md-0\">\r\n        <div className=\"log-in-section\">\r\n          <div className=\"row align-items-center\">\r\n            <div className=\"col-xxl-6 col-xl-7 col-lg-6 col-sm-8 mx-auto\">\r\n              <div className=\"log-in-box\">\r\n                <div className=\"input-box\">\r\n                  <form\r\n                    className=\"row g-4\"\r\n                  // method=\"POST\"\r\n                  // id=\"frmLogin\"\r\n                  // action=\"https://ca-ctm.systems.com.vn/customers/login\"\r\n                  >\r\n                    <div className=\"col-12\">\r\n                      <div className=\"form-floating theme-form-floating log-in-form\">\r\n                        <input\r\n                          type=\"text\"\r\n                          className=\"form-control\"\r\n                          id=\"phone1\"\r\n                          name=\"phone\"\r\n                          placeholder=\"Số điện thoại\"\r\n                          required\r\n                          maxLength={150}\r\n                          value={phone}\r\n                          onChange={(e) => setPhone(e.target.value)}\r\n                        />\r\n                        <label htmlFor=\"phone1\">Số điện thoại</label>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"col-12\">\r\n                      <div className=\"form-floating theme-form-floating log-in-form\">\r\n                        <input\r\n                          type=\"password\"\r\n                          className=\"form-control\"\r\n                          name=\"password\"\r\n                          id=\"password\"\r\n                          placeholder=\"Mật khẩu\"\r\n                          required\r\n                          minLength={8}\r\n                          maxLength={32}\r\n                          value={password}\r\n                          onChange={(e) => setPassword(e.target.value)}\r\n                        />\r\n                        <label htmlFor=\"password\">Mật khẩu</label>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"col-12\">\r\n                      <ImageError\r\n                        width={1000}\r\n                        height={1000}\r\n                        className=\"border rounded captchaImg w-full\"\r\n                        src=\"https://ca-ctm.systems.com.vn/customers/getcaptcha\"\r\n                        alt=\"captcha\"\r\n                      />\r\n                    </div>\r\n\r\n                    <div className=\"col-12\">\r\n                      <div className=\"form-floating theme-form-floating log-in-form\">\r\n                        <input\r\n                          type=\"text\"\r\n                          className=\"form-control\"\r\n                          id=\"captcha\"\r\n                          name=\"captcha\"\r\n                          placeholder=\"Mã xác thực\"\r\n                          required\r\n                          maxLength={6}\r\n\r\n                        />\r\n                        <label htmlFor=\"captcha\">Mã xác thực</label>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"col-12\">\r\n                      <div className=\"forgot-box d-flex justify-content-between align-items-center\">\r\n                        <div className=\"form-check ps-0 m-0 remember-box\">\r\n                          <input\r\n                            name=\"remember\"\r\n                            className=\"checkbox_animated check-box\"\r\n                            type=\"checkbox\"\r\n                            id=\"flexCheckDefault\"\r\n                            value=\"1\"\r\n                          />\r\n                          <label\r\n                            className=\"form-check-label\"\r\n                            htmlFor=\"flexCheckDefault\"\r\n                          >\r\n                            Ghi nhớ tài khoản\r\n                          </label>\r\n                        </div>\r\n                        <a\r\n                          href=\"/customers/forgotPassword\"\r\n                          className=\"forgot-password\"\r\n                        >\r\n                          Quên mật khẩu?\r\n                        </a>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"col-12\">\r\n                      <button\r\n                        className=\"btn btn-animation w-100 justify-content-center\"\r\n                        type=\"button\"\r\n                        onClick={handleLogin}\r\n                      >\r\n                        Đăng nhập\r\n                      </button>\r\n                    </div>\r\n\r\n                    {/* <input type=\"hidden\" name=\"redirect\" value=\"/\" />\r\n                          <input\r\n                            type=\"hidden\"\r\n                            name=\"csrf_token\"\r\n                            value=\"MTc2MDA1NzA1OEVPcGJXS0VVTm94YmE2UHBYM2NGSDNXQmFPS3l4S295\"\r\n                          /> */}\r\n                  </form>\r\n                </div>\r\n\r\n                <div className=\"other-log-in pt-4\"></div>\r\n                <div className=\"sign-up-box text-center\">\r\n                  <h4>Bạn đã có tài khoản?</h4>\r\n                  <a href=\"/customers/register\" className=\"fw-bold\">\r\n                    Đăng ký\r\n                  </a>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"col-xxl-6 col-xl-5 col-lg-6 d-lg-block d-none ms-auto\">\r\n              <div className=\"image-contain text-center\">\r\n                <ImageError\r\n                  width={1000}\r\n                  height={1000}\r\n                  src=\"/assets/eme2023/images/inner-page/log-in.png\"\r\n                  className=\"img-fluid w-full\"\r\n                  alt=\"login\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default ModalLogin;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1290, "column": 0}, "map": {"version":3,"sources":["file:///C:/ha%20manh%20cuong/work/ctm/frontend/src/app/%28sites%29/layout.tsx"],"sourcesContent":["\r\n\"use client\";\r\nimport \"@/app/globals.css\";\r\nimport ModalLogin from \"@/components/features/modal/ModalLogin\";\r\nimport AuthProvider from \"@/components/features/provider/AuthProvider\";\r\nimport { createContext, useContext, useState } from \"react\";\r\ntype ModalLoginContextType = {\r\n  isOpen: boolean;\r\n  setIsOpen: (isOpen: boolean) => void;\r\n}\r\n\r\nconst ModalLoginContext = createContext<ModalLoginContextType>({\r\n  isOpen: false,\r\n  setIsOpen: () => { }\r\n});\r\n\r\n// Hook để sử dụng Context\r\nexport const useModalLogin = () => {\r\n  const context = useContext(ModalLoginContext);\r\n  return context;\r\n}\r\nexport default function SitesLayout({\r\n  children,\r\n}: {\r\n  children: React.ReactNode\r\n}) {\r\n\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  return (\r\n\r\n    <>\r\n\r\n      <AuthProvider>\r\n        <ModalLoginContext.Provider value={{ isOpen, setIsOpen }}>\r\n          {children}\r\n          {isOpen && <ModalLogin onClose={() => setIsOpen(false)} />}\r\n\r\n        </ModalLoginContext.Provider>\r\n      </AuthProvider>\r\n\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAGA;AACA;AACA;AAJA;;;;;;AAUA,MAAM,kCAAoB,IAAA,sNAAa,EAAwB;IAC7D,QAAQ;IACR,WAAW,KAAQ;AACrB;AAGO,MAAM,gBAAgB;IAC3B,MAAM,UAAU,IAAA,mNAAU,EAAC;IAC3B,OAAO;AACT;AACe,SAAS,YAAY,EAClC,QAAQ,EAGT;IAEC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IAErC,qBAEE;kBAEE,cAAA,8OAAC,qKAAY;sBACX,cAAA,8OAAC,kBAAkB,QAAQ;gBAAC,OAAO;oBAAE;oBAAQ;gBAAU;;oBACpD;oBACA,wBAAU,8OAAC,gKAAU;wBAAC,SAAS,IAAM,UAAU;;;;;;;;;;;;;;;;;;AAO1D","debugId":null}}]
}